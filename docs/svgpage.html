<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rack: Writing SVG files</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="rack.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rack-logo-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><!-- rack /-->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Writing SVG files </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="fileio_svg"></a>
Automatical generation of SVG files</h1>
<p><b>Rack</b> supports presenting generated PNG images collectively using Scalable Vector Graphics (SVG) format.</p>
<p>When executing <b>Rack</b>, all the PNG images that have been written with <code>&ndash;outputFile</code> / <code>-o</code> <br  />
 are included automatically in a simple <em>internal</em> SVG structure. This is neither time nor memory consuming, as the SVG structure itself is lightweight. In addition, some processing - like alignment of elements - only if an SVG file is actually written with <code>&ndash;outputFile</code> <code></code> &lt;file&gt;.svg command. Typically, that command is the last one executed.</p>
<h2><a class="anchor" id="svg_example"></a>
Examples of SVG panels</h2>
<p>Align two images horizontally (default) </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   volume.h5 --cSize 400 -Q DBZH -c -o gray.png --palette <span class="stringliteral">&#39;default&#39;</span> -o rgb.png \</div>
<div class="line">   -o simple.svg</div>
<div class="ttc" id="anamespacerack_html"><div class="ttname"><a href="namespacerack.html">rack</a></div><div class="ttdef"><b>Definition:</b> DataSelector.cpp:44</div></div>
</div><!-- fragment --><div class="image">
<img src="simple.png" alt=""/>
<div class="caption">
SVG output 'simple.svg'</div></div>
 Also legend outputs are included in the resulting SVG panel. </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   volume.h5 --cSize 400 -Q DBZH -c -o gray.png --palette <span class="stringliteral">&#39;default&#39;</span> -o rgb.png \</div>
<div class="line">   --legendOut legend.svg \</div>
<div class="line">   -o simple2.svg</div>
</div><!-- fragment --><div class="image">
<img src="simple2.png" alt=""/>
<div class="caption">
SVG output 'simple2.svg'</div></div>
 With several inputs, it is handier to use <code>--script</code> . Output names must be distinct, which is achieved using variables. For details, see <a class="el" href="scriptspage.html#scripts">Defining scripts</a> and <a class="el" href="text-output-page.html#templates">Formatting metadata output using templates</a> . If generated products contain varying metadata, titles appear, automatically grouping distinguishing data. </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   --script <span class="stringliteral">&#39;--cReset --cSize 300 -Q DBZH -c --palette &quot;&quot; -o out-${NOD}.png&#39;</span> \</div>
<div class="line">   data/pvol_fi{anj,kor,kuo}.h5 \</div>
<div class="line">   -o triple1.svg</div>
</div><!-- fragment --><div class="image">
<img src="triple1.png" alt=""/>
<div class="caption">
SVG output 'triple1.svg'</div></div>
 <code>Rack</code> supports grouping output images to rows or columns. The groups are identified with <code>--gGroupTitle</code> <code>arg</code> , using distinguishing variables in the argument, for example <code>${NOD}</code> , <code>${what:date}</code> or <code>${what:time}</code> . </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   --script <span class="stringliteral">&#39;--cReset --cSize 300 -Q DBZH -c --palette &quot;&quot; -o out-${what:date}T${what:time}-${NOD}.png&#39;</span> \</div>
<div class="line">   --gGroupTitle <span class="stringliteral">&#39;Sky conditions at ${time|%H:%M} UTC&#39;</span> \</div>
<div class="line">   data-kiira/20170812*.h5 \</div>
<div class="line">   -o time-series1.svg</div>
</div><!-- fragment --><div class="image">
<img src="time-series1.png" alt=""/>
<div class="caption">
SVG output 'time-series1.svg'</div></div>
 Similar example using originating radar as the distinguishing metadata. </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   --script <span class="stringliteral">&#39;--cReset --cSize 300 -Q DBZH -c --palette &quot;&quot; -o out-${what:date}T${what:time}-${NOD}.png&#39;</span> \</div>
<div class="line">   --gGroupTitle <span class="stringliteral">&#39;Examples of ${PLC} (${NOD})&#39;</span> \</div>
<div class="line">   data-kiira/20170812*.h5 \</div>
<div class="line">   -o radar-series.svg</div>
</div><!-- fragment --><div class="image">
<img src="radar-series.png" alt=""/>
<div class="caption">
SVG output 'radar-series.svg'</div></div>
 A further example, with three levels of titles. </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   --script <span class="stringliteral">&#39;--cReset --cSize 300 -Q DBZH -c --palette &quot;&quot; -o out-${what:date}T${what:time}-${NOD}.png&#39;</span> \</div>
<div class="line">   --gGroupTitle <span class="stringliteral">&#39;Examples of Kiira case&#39;</span> --gStyle .IMAGE_BORDER=<span class="stringliteral">&#39;stroke:black;stroke-width:1&#39;</span> \</div>
<div class="line">   data-kiira/201708121530_radar.polar.fikor.h5 data-kiira/201708121600_radar.polar.fiika.h5 \</div>
<div class="line">   -o series-labelled2.svg</div>
</div><!-- fragment --><div class="image">
<img src="series-labelled2.png" alt=""/>
<div class="caption">
SVG output 'series-labelled2.svg'</div></div>
 Titles can be removed with respective empty command values: </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   --script <span class="stringliteral">&#39;--cReset --cSize 300 -Q DBZH -c --palette &quot;&quot; -o out-${what:date}T${what:time}-${NOD}.png&#39;</span> \</div>
<div class="line">   --gTitle <span class="stringliteral">&#39;&#39;</span> --gGroupTitle <span class="stringliteral">&#39;&#39;</span> --gStyle .IMAGE_BORDER=<span class="stringliteral">&#39;stroke:black;stroke-width:1&#39;</span> \</div>
<div class="line">   data-kiira/201708121?00_radar.polar.fi{kor,ika}.h5 \</div>
<div class="line">   -o series-labelled3.svg</div>
</div><!-- fragment --><div class="image">
<img src="series-labelled3.png" alt=""/>
<div class="caption">
SVG output 'series-labelled3.svg'</div></div>
 A further example, usage of styles </p><div class="fragment"><div class="line"><a class="code" href="namespacerack.html">rack</a> --outputPrefix $PWD/out/  \</div>
<div class="line">   --script <span class="stringliteral">&#39;--cReset --cSize 300 -Q DBZH -c --palette &quot;&quot; -o out-${what:date}T${what:time}-${NOD}.png&#39;</span> \</div>
<div class="line">   --gTitle <span class="stringliteral">&#39;AUTO&#39;</span> --gGroupTitle <span class="stringliteral">&#39;AUTO:Examples of ${what:time}&#39;</span> --gTitleBoxHeight <span class="stringliteral">&#39;30,20,10&#39;</span> \</div>
<div class="line">   --gStyle .IMAGE_BORDER=<span class="stringliteral">&#39;stroke:black;stroke-width:1&#39;</span> --gStyle <span class="stringliteral">&#39;rect.MAIN_TITLE=fill:red&#39;</span> \</div>
<div class="line">   --gStyle .MAIN_TITLE=<span class="stringliteral">&#39;font-size:15;font-family:Times&#39;</span> --gStyle .LOCATION=<span class="stringliteral">&#39;fill:green&#39;</span> \</div>
<div class="line">   data-kiira/201708121??0_radar.polar.fi{ika,kor,van}.h5 \</div>
<div class="line">   -o series-styled.svg</div>
</div><!-- fragment --><div class="image">
<img src="series-styled.png" alt=""/>
<div class="caption">
SVG output 'series-styled.svg'</div></div>
 </p>
<p>Alignment of the elements is done horizontally or vertically. By default, images are positioned horizontally, from left to right. This can be changed with <code>&ndash;gLayout</code> , selecting <code>orientation</code> as <code>HORZ</code> or <code>VERT</code> and coordinate <code>direction</code> as increasing (<code>INCR</code> ) or decreasing (<code>DECR</code> ).</p>
<p>The resulting SVG file can be converted to various other image formats using ImageMagick's <code>convert</code> program, for example. A good alternative is <code>inkscape</code> .</p>
<h2><a class="anchor" id="svg_paths"></a>
Relative or absolute image file paths?</h2>
<p>In SVG files, IMAGE elements may use either relative or absolute file paths. By default, <code>Rack</code> uses absolute paths in IMAGE elements. Should relative paths be used, simply use them on commandline, or use <code>&ndash;outputPrefix</code> <code>$PWD/</code> together with <code>&ndash;outputConf</code> svg:absolutePaths=false .</p>
<p>Some considerations:</p>
<ul>
<li>If an SVG file is to be placed on an HTML page, file references of IMAGE elements must be <em>relative</em> â€“ HTTP servers typically avoid revealing any system-side paths, hence do not support them in openly adressing files.</li>
<li>ImageMagick's <code>convert</code> and <code>display</code> programs seem to require <em>absolute</em> paths in filenames.</li>
<li><code>Inkscape</code> program supports both</li>
</ul>
<p>With <b>Rack</b> , SVG files can also be created using templates, see <a class="el" href="text-output-page.html#templates">Formatting metadata output using templates</a> . </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
</html>
