<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rack: Modifying data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="rack.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rack-logo-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><!-- rack /-->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Modifying data</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#modify">Modifying data arrays and metadata</a><ul><li class="level2"><a href="#CmdSetODIM">Adding and changing ODIM metadata</a></li>
<li class="level2"><a href="#CmdCompleteODIM">Ensuring ODIM metadata</a></li>
<li class="level2"><a href="#CmdDelete">Deleting data</a></li>
<li class="level2"><a href="#CmdKeep">Keeping data</a></li>
<li class="level2"><a href="#CmdMove">Renaming and moving paths and attributes</a></li>
</ul>
</li>
<li class="level1"><a href="#conversions">Data conversions</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="modify"></a>
Modifying data arrays and metadata</h1>
<h2><a class="anchor" id="CmdSetODIM"></a>
Adding and changing ODIM metadata</h2>
<p>Metadata attributes in an HDF5 structure can be changed with <code>--setODIM</code> command.</p>
<p>For convenience, this special command has also a shorthand â€“ a direct assignment appended to <code>--</code> , for example <code>/dataset1/where</code>:rscale=500 .</p>
<p>Modifies metadata (data attributes).  </p>
<div class="fragment"><div class="line">--setODIM &lt;assignment&gt;   (section: general)</div>
<div class="line">  Set data properties (ODIM). Works also directly: --/&lt;path&gt;:&lt;key&gt;[=&lt;value&gt;]. See --completeODIM</div>
<div class="line">  - assignment () [/&lt;path&gt;:&lt;key&gt;[=&lt;value&gt;]]</div>
<div class="line"> </div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">assignment</td><td>- source path consisting of group path, attribute key and value</td></tr>
  </table>
  </dd>
</dl>
<p>A full path consist of a slash-separated group path elements followed by an attribute key separated by colon.</p>
<p>Examples: </p><div class="fragment"><div class="line"><span class="preprocessor"># Set beam resolution</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --/dataset1/where:rscale=500 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Set date and time (note string format)</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --/what:date=<span class="stringliteral">&quot;20140827&quot;</span> --/what:time=<span class="stringliteral">&quot;093000&quot;</span> -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Set freezing level</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --/how:freeze=2.10 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Set radar location</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --/where:lat=64.7749 --/where:lon=26.3189 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="ttc" id="anamespacerack_html"><div class="ttname"><a href="namespacerack.html">rack</a></div><div class="ttdef"><b>Definition</b> DataSelector.cpp:44</div></div>
</div><!-- fragment -->  <dl class="section see"><dt>See also</dt><dd><a class="el" href="classrack_1_1CmdSetODIM.html" title="Modifies metadata (data attributes).">rack::CmdSetODIM</a> (code) </dd>
<dd>
CompleteODIM</dd></dl>
<h2><a class="anchor" id="CmdCompleteODIM"></a>
Ensuring ODIM metadata</h2>
<p>Ensure correct ODIM types after setting attributes.  </p>
<p>The OPERA data information model (ODIM) defines conventions for weather radar data. Some important ODIM attributes can be added automatically with <code>--completeODIM</code> command, which sets <code>nbins</code> , <code>nrays</code> , <code>xsize</code> , and <code>ysize</code> equal to data dimensions, if already loaded as image.</p>
<p><b>Synopsis</b> </p><div class="fragment"></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="classrack_1_1CmdSetODIM.html" title="Modifies metadata (data attributes).">rack::CmdSetODIM</a> (code) </dd>
<dd>
CmdSetODIM  </dd>
<dd>
CmdSetODIM</dd>
<dd>
<a class="el" href="classrack_1_1CmdCompleteODIM.html" title="Ensure correct ODIM types after setting attributes.">rack::CmdCompleteODIM</a> (code)</dd></dl>
<h2><a class="anchor" id="CmdDelete"></a>
Deleting data</h2>
<p>The h5 structure can be pruned with <code>--delete</code> command which uses selector arguments similar to that of <code>--select</code> (see <a class="el" href="index.html#selecting">Selecting data</a>).</p>
<p>Remove parts of a hierarchical data structure.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">selection</td><td>- desired parts to be deleted (syntax explained in <a class="el" href="selectpage.html#CmdSelect">Selecting data</a>)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Synopsis</b> </p><div class="fragment"></div><!-- fragment --><p><b>Examples</b> </p><div class="fragment"><div class="line"><span class="preprocessor"># Delete dataset[i] groups 2...10 </span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --<span class="keyword">delete</span> dataset2:10 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Delete data[i] groups 3...20</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --<span class="keyword">delete</span> data3:20 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Delete data[i] groups 3...20, in dataset[i] groups 2...10</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --<span class="keyword">delete</span> dataset2:10/data3:20 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Delete independently dataset[i] and data[i] groups with two commands</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --<span class="keyword">delete</span> dataset2:6 --<span class="keyword">delete</span> data2:5 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Delete data[i] groups containing VRAD</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --<span class="keyword">delete</span> quantity=VRAD -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Delete data[i] groups containing VRAD in 1.0 degree sweeps and above</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --<span class="keyword">delete</span> elangle=1.0:90,quantity=VRAD -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Delete dual-PRF measurement data - leaving dataset groups</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --delete prf=DOUBLE -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Delete dual-PRF measurement data - also dataset groups</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --delete dataset:,prf=DOUBLE -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Delete actual data arrays</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --delete data -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Delete quality[i] groups </div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --delete quality: -o volume-modified.h5</div>
<div class="line"> </div>
</div><!-- fragment --><p>Notice that <code>--elangle</code> applies to volume data only, and essentially selects <code>dataset</code> groups. Similarly, <code>quantity</code> selects <code>data</code> (and <code>quality</code>) groups. If selection parameters of both levels are issued in the same command, implicit <code>AND</code> function applies in selection.</p>
<dl class="section see"><dt>See also</dt><dd>CmdKeep </dd>
<dd>
modifypage  </dd>
<dd>
<a class="el" href="classrack_1_1CmdDelete.html" title="Remove parts of a hierarchical data structure.">rack::CmdDelete</a> (code)</dd></dl>
<h2><a class="anchor" id="CmdKeep"></a>
Keeping data</h2>
<p>One may use <code>--keep</code> to save part of the data, making the rest to be deleted. Technically, this is a "complement" of <code>--delete</code> command.</p>
<p>Remove parts of a hierarchical data structure.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">selection</td><td>- desired parts to be kept (syntax explained in <a class="el" href="selectpage.html#CmdSelect">Selecting data</a>)</td></tr>
  </table>
  </dd>
</dl>
<p>Metadata groups (<code>what</code>, <code>where</code>, <code>how</code>) are preserved or deleted together with their parent groups.</p>
<p><b>Synopsis</b> </p><div class="fragment"></div><!-- fragment --><p>Examples: </p><div class="fragment"><div class="line"><span class="preprocessor"># Keep data[i] groups containg DBZH</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep quantity=DBZH -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Keep dataset[i] groups containing (at least) VRAD</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep quantity=VRAD -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Keep dataset[i] group with elangle 5.0 degrees, at lowest</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep elangle=5.0:90.0 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Keep three dataset[i] groups with lowest elangle </div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep elangle=-90.0:90.0,count=3 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Keep quality groups only</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep quality -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Keep quality1 and quality2 groups</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep quality1:2 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Keep data specific quality groups</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep data:/quality -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"># Keep dataset[] specific quality groups</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --keep dataset:/quality -o volume-modified.h5</div>
<div class="line"> </div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>CmdDelete </dd>
<dd>
modifypage  </dd>
<dd>
<a class="el" href="classrack_1_1CmdKeep.html" title="Remove parts of a hierarchical data structure.">rack::CmdKeep</a> (code)</dd></dl>
<h2><a class="anchor" id="CmdMove"></a>
Renaming and moving paths and attributes</h2>
<p>One can rename existing paths (hdf5 group names) and attributes with <code>--move</code> command.</p>
<p>Rename or move data groups and attributes.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>- source path consisting at least of the group path </td></tr>
    <tr><td class="paramname">dst</td><td>- full destination path or only ':' followed by attribute key</td></tr>
  </table>
  </dd>
</dl>
<p>A full path consist of a slash-separated group path elements followed by an attribute key separated by colon. For example: <code>/dataset1/data2/what</code>:gain .</p>
<div class="fragment"></div><!-- fragment --><p>Examples: </p><div class="fragment"><div class="line"><span class="preprocessor"># Move group</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --move dataset1/quality1,dataset1/data2/quality3 -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Rename only the attribute key</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --move dataset1/how:task,:newtask -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Move attribute in hierarchy</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --move dataset1/how:task,what -o volume-modified.h5</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Move and rename attribute</span></div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume.h5 --move dataset1/where:nrays,dataset1/how:imageheight -o volume-modified.h5</div>
<div class="line"> </div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>CmdDelete </dd>
<dd>
CmdKeep </dd>
<dd>
modifypage  </dd>
<dd>
<a class="el" href="classrack_1_1CmdMove.html" title="Rename or move data groups and attributes.">rack::CmdMove</a> (code)</dd></dl>
<h1><a class="anchor" id="conversions"></a>
Data conversions</h1>
<p>Convert data with desired encoding.  </p>
<p>Volume data can be converted to desired scale and encoding with <code>--encoding</code> followed by <code>--convert</code> . If the input file contains several quantities, the target quantity can be selected with <code>--select</code> (<code>-s</code>) command:</p>
<div class="fragment"><div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume-<span class="keywordtype">double</span>.h5 -Q DBZH --encoding C,0.5,-32 --convert  -o volume-<span class="keyword">new</span>.h5</div>
<div class="line"><a class="code hl_namespace" href="namespacerack.html">rack</a> volume-uint16.h5 -Q DBZH --encoding d --convert -Q VRAD --encoding C,0.025,-7.65506,0,255 --convert -o volume-<span class="keyword">new</span>.h5</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="classrack_1_1CmdEncoding.html" title="Facility for validating and storing desired technical (non-meteorological) user parameters.">rack::CmdEncoding</a> (code) </dd>
<dd>
<a class="el" href="classrack_1_1CmdSetODIM.html" title="Modifies metadata (data attributes).">rack::CmdSetODIM</a> (code)  </dd>
<dd>
<a class="el" href="classrack_1_1CmdConvert.html" title="Convert data with desired encoding.">rack::CmdConvert</a> (code) </dd>
<dd>
CmdDelete </dd>
<dd>
CmdMove </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.8
</small></address>
</body>
</html>
